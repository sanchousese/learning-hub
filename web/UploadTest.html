<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body>

<video width="320" height="240" controls>
    <source src="rest/course/getVideoCourse/1">
    Your browser does not support the video tag.
</video>

<h1>Upload a File</h1>

<form id = "uploadForm" action="http://localhost:8080/rest/course/upload" method="post" enctype="multipart/form-data">

    <p>
        Select a file : <input id="test" type="file" name="file" size="50" />
    </p>

    <input type="submit" value="Upload It" />
</form>

<input type="button" value="Test Ajax" onclick="ajaxUpload()">
<br> <H1 id = "progress">percent</H1>

<div class="progress progress_fix">
    <div id = "uProgress" class="progress-bar progress-bar-striped active"  role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
        <span class="sr-only">45% Complete</span>
    </div>
</div>

<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script>
    var valeur = Math.round((1 / 100) * 100);
    $('.progress-bar').css('width', valeur+'%').attr('aria-valuenow', valeur);

    function ajaxUpload(){
//        $.ajax( {
//            url: 'http://localhost:8080/rest/course/upload',
//            type: 'POST',
//            data: new FormData( $("#uploadForm")[0] ),
//            processData: false,
//            contentType: false
//            //contentType: "multipart/form-data"
//        } );
        //var formdata = new FormData($("#uploadForm")[0]);
        var formdata = new FormData();
        var file_data = $("#test").prop("files")[0];
        formdata.append("file", file_data);
        //formdata.append("file1", file);
        var ajax = new XMLHttpRequest();
        ajax.upload.addEventListener("progress", progressHandler, false);
        //ajax.addEventListener("load", completeHandler, false);
        //ajax.addEventListener("error", errorHandler, false);
        //ajax.addEventListener("abort", abortHandler, false);
        ajax.open("POST", "http://localhost:8080/rest/course/uploadLogoImage");
        ajax.send(formdata);
    }
    function progressHandler(event){
        //alert(Math.round((event.loaded / event.total) * 100));
        var el = document.getElementById("progress");
        el.innerHTML = Math.round((event.loaded / event.total) * 100);
//        _("loaded_n_total").innerHTML = "Uploaded "+event.loaded+" bytes of "+event.total;
//        var percent = (event.loaded / event.total) * 100;
//        _("progressBar").value = Math.round(percent);
//        _("status").innerHTML = Math.round(percent)+"% uploaded... please wait";
    }

</script>
<script src="js/bootstrap.min.js"></script>
</body>
</html>